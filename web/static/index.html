<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Gesture DJ Booth</title>
    <link rel="stylesheet" href="/static/css/styles.css">
</head>
<body>
    <!-- Camera feed -->
    <div id="camera-section">
        <video id="webcam" autoplay playsinline muted></video>
        <canvas id="overlay"></canvas>
        <div id="hand-status">Show your hands to control</div>
    </div>

    <!-- DJ Booth -->
    <div id="dj-booth">
        <!-- Deck A -->
        <div class="deck" id="deck-a">
            <div class="deck-label">DECK A</div>
            <div class="turntable">
                <div class="vinyl" id="vinyl-a">
                    <div class="vinyl-label" id="track-label-a">TRACK 1</div>
                    <div class="vinyl-dot"></div>
                </div>
            </div>
            <div class="track-type" id="track-type-a">STEMS</div>
            <div class="deck-controls">
                <div class="knob-container">
                    <div class="knob" id="knob-vol-a">
                        <div class="knob-indicator"></div>
                    </div>
                    <div class="knob-label">VOLUME</div>
                    <div class="knob-value" id="vol-a-value">70%</div>
                </div>
                <button class="play-btn" id="play-a">PLAY</button>
            </div>
        </div>

        <!-- Mixer + Effects -->
        <div id="mixer">
            <div class="mixer-section">
                <div class="crossfader-container">
                    <div class="crossfader-label">CROSSFADER</div>
                    <div class="crossfader-track">
                        <div class="crossfader-knob" id="crossfader"></div>
                    </div>
                    <div class="crossfader-labels">
                        <span>A</span>
                        <span>B</span>
                    </div>
                </div>
            </div>

            <div class="mixer-section">
                <div class="knob-container">
                    <div class="knob filter-knob" id="knob-filter">
                        <div class="knob-indicator"></div>
                    </div>
                    <div class="knob-label">FILTER</div>
                    <div class="knob-value" id="filter-value">20kHz</div>
                </div>
            </div>

            <div class="effects-section">
                <div class="effects-label">EFFECTS (1-3 fingers)</div>
                <div class="effects-row">
                    <button class="effect-btn" id="fx-1">FX1</button>
                    <button class="effect-btn" id="fx-2">FX2</button>
                    <button class="effect-btn" id="fx-3">FX3</button>
                </div>
            </div>
        </div>

        <!-- Deck B -->
        <div class="deck" id="deck-b">
            <div class="deck-label">DECK B</div>
            <div class="turntable">
                <div class="vinyl" id="vinyl-b">
                    <div class="vinyl-label" id="track-label-b">TRACK 2</div>
                    <div class="vinyl-dot"></div>
                </div>
            </div>
            <div class="track-type" id="track-type-b">SINGLE</div>
            <div class="deck-controls">
                <div class="knob-container">
                    <div class="knob" id="knob-vol-b">
                        <div class="knob-indicator"></div>
                    </div>
                    <div class="knob-label">VOLUME</div>
                    <div class="knob-value" id="vol-b-value">70%</div>
                </div>
                <button class="play-btn" id="play-b">PLAY</button>
            </div>
        </div>
    </div>

    <!-- Gesture hints -->
    <div id="gesture-hints">
        <div class="hint">FIST = Play/Pause</div>
        <div class="hint">PINCH+DRAG = Adjust</div>
        <div class="hint">FLICK WRIST = Switch Track</div>
    </div>

    <!-- Start overlay -->
    <div id="start-overlay">
        <button id="start-btn">START DJ BOOTH</button>
        <p class="start-hint">Uses camera for hand gestures</p>
    </div>

    <!-- Loading -->
    <div id="loading-overlay" style="display: none;">
        <div class="loading-spinner"></div>
        <p>Loading...</p>
    </div>

    <!-- Error -->
    <div id="error-overlay" style="display: none;">
        <p id="error-message"></p>
        <button id="retry-btn">Retry</button>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
    <script type="module" src="/static/js/main.js"></script>
</body>
</html>
